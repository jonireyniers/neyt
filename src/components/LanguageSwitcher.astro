---
// filepath: c:\Users\h039864\OneDrive - Baloise\personal\neyt-main\src\components\LanguageSwitcher.astro
export interface Props {
  locale: 'en' | 'fr' | 'nl';
  currentPath: string;
}

const { locale, currentPath } = Astro.props;

const languages = [
  { code: 'nl', label: 'NL' },
  { code: 'fr', label: 'FR' },
  { code: 'en', label: 'EN' }
];

function getLocalizedPath(newLocale: string) {
  if (currentPath === '/' || currentPath === '') {
    return newLocale === 'nl' ? '/' : `/${newLocale}`;
  }
  const pathWithoutLocale = currentPath.replace(/^\/(en|fr|nl)/, '');
  return newLocale === 'nl' ? pathWithoutLocale || '/' : `/${newLocale}${pathWithoutLocale}`;
}
---

<div class="flex gap-1 bg-gray-100 p-1 rounded-lg">
  {languages.map(lang => (
    <a
      href={getLocalizedPath(lang.code)}
      class={`px-4 py-2 rounded-md text-sm font-semibold transition-all duration-200 ${
        locale === lang.code
          ? 'bg-primary text-white shadow-sm'
          : 'text-gray-600 hover:text-gray-900 hover:bg-white'
      }`}
    >
      {lang.label}
    </a>
  ))}
</div>